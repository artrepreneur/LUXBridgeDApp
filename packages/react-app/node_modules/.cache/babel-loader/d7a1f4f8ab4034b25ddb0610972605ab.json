{"ast":null,"code":"var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n      autoPlay = _ref.autoPlay,\n      children = _ref.children,\n      controlsProp = _ref.controls,\n      gridArea = _ref.gridArea,\n      loop = _ref.loop,\n      margin = _ref.margin,\n      messages = _ref.messages,\n      mute = _ref.mute,\n      _onDurationChange = _ref.onDurationChange,\n      _onEnded = _ref.onEnded,\n      _onPause = _ref.onPause,\n      _onPlay = _ref.onPlay,\n      _onTimeUpdate = _ref.onTimeUpdate,\n      _onVolumeChange = _ref.onVolumeChange,\n      skipInterval = _ref.skipInterval,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var _useState = useState([]),\n      captions = _useState[0],\n      setCaptions = _useState[1];\n\n  var _useState2 = useState(),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(),\n      percentagePlayed = _useState4[0],\n      setPercentagePlayed = _useState4[1];\n\n  var _useState5 = useState(false),\n      playing = _useState5[0],\n      setPlaying = _useState5[1];\n\n  var _useState6 = useState(),\n      scrubTime = _useState6[0],\n      setScrubTime = _useState6[1];\n\n  var _useState7 = useState(),\n      volume = _useState7[0],\n      setVolume = _useState7[1];\n\n  var _useState8 = useState(false),\n      hasPlayed = _useState8[0],\n      setHasPlayed = _useState8[1];\n\n  var _useState9 = useState(),\n      interacting = _useState9[0],\n      setInteracting = _useState9[1];\n\n  var _useState10 = useState(),\n      height = _useState10[0],\n      setHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      width = _useState11[0],\n      setWidth = _useState11[1];\n\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n\n    return result;\n  }, [controlsProp]); // mute if needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]); // when the video is first rendered, set state from it where needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]); // turn off interacting after a while\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]);\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      } // remember the state of the text tracks for subsequent rendering\n\n\n      var textTracks = video.textTracks;\n\n      if (textTracks.length > 0) {\n        if (textTracks.length === 1) {\n          // only one track was provided\n          var track = textTracks[0];\n          var active = track.mode === 'showing';\n\n          if (!captions || !captions[0] || captions[0].active !== active) {\n            // get label if provided and if the track is active\n            // (currently showing) or not\n            setCaptions([{\n              label: track.label,\n              active: active\n            }]);\n          }\n        } else {\n          // multiple tracks provided\n          var nextCaptions = [];\n          var set = false;\n\n          for (var i = 0; i < textTracks.length; i += 1) {\n            var _track = textTracks[i];\n\n            var _active = _track.mode === 'showing';\n\n            nextCaptions.push({\n              label: _track.label,\n              active: _active\n            });\n\n            if (!captions || !captions[i] || captions[i].active !== _active) {\n              set = true;\n            }\n          }\n\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      }\n    }\n  }, [captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n\n    for (var i = 0; i < textTracks.length; i += 1) {\n      textTracks[i].mode = i === index ? 'showing' : 'hidden';\n    }\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n\n  if (controls != null && controls.position) {\n    var _controls$items;\n\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || 'video.captions',\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]); // set other captions to active=false\n\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false; // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null ? void 0 : _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) {\n          controlsMenuItems.push(buttonProps[item][i]);\n        }\n\n        return undefined;\n      }\n\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, {\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }))), /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n\n  var mouseEventListeners;\n\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n\n  var style;\n\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.defaultProps = {};\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };","map":{"version":3,"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","ThemeContext","useLayoutEffect","defaultProps","Box","Button","Menu","Meter","Stack","Text","Keyboard","containsFocus","useForwardedRef","StyledVideo","StyledVideoContainer","StyledVideoControls","StyledVideoScrubber","MessageContext","VideoPropTypes","VOLUME_STEP","formatTime","time","minutes","Math","round","seconds","Video","_ref","ref","alignSelf","autoPlay","children","controlsProp","controls","gridArea","loop","margin","messages","mute","_onDurationChange","onDurationChange","_onEnded","onEnded","_onPause","onPause","_onPlay","onPlay","_onTimeUpdate","onTimeUpdate","_onVolumeChange","onVolumeChange","skipInterval","rest","theme","_useContext","format","_useState","captions","setCaptions","_useState2","currentTime","setCurrentTime","_useState3","duration","setDuration","_useState4","percentagePlayed","setPercentagePlayed","_useState5","playing","setPlaying","_useState6","scrubTime","setScrubTime","_useState7","volume","setVolume","_useState8","hasPlayed","setHasPlayed","_useState9","interacting","setInteracting","_useState10","height","setHeight","_useState11","width","setWidth","containerRef","scrubberRef","videoRef","result","items","position","video","current","muted","textTracks","mode","timer","setTimeout","clearTimeout","videoHeight","rect","getBoundingClientRect","ratio","videoRatio","videoWidth","nextHeight","undefined","nextWidth","track","active","label","nextCaptions","set","_track","_active","push","play","pause","scrub","event","scrubberRect","percent","clientX","left","seek","seekForward","scrubber","interval","seekBackward","louder","quieter","showCaptions","index","fullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","console","warn","controlsElement","_controls$items","over","background","color","opacity","dark","iconColor","icons","formattedTime","Icons","ClosedCaption","closedCaption","Configure","configure","FullScreen","fullScreen","Pause","Play","ReduceVolume","reduceVolume","Volume","captionControls","map","caption","icon","createElement","a11yTitle","onClick","updatedCaptions","volumeControls","control","id","close","buttonProps","disabled","controlsMenuItems","item","onBlur","direction","align","justify","hoverIndicator","onFocus","flex","size","thickness","values","value","tabIndex","role","onMouseMove","onMouseLeave","pad","horizontal","dropAlign","bottom","right","dropBackground","openMenu","closeMenu","concat","mouseEventListeners","onMouseEnter","onTouchStart","style","fit","onLeft","onRight","displayName","propTypes"],"sources":["/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/LUXDApp/packages/react-app/node_modules/grommet/es6/components/Video/Video.js"],"sourcesContent":["var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n      autoPlay = _ref.autoPlay,\n      children = _ref.children,\n      controlsProp = _ref.controls,\n      gridArea = _ref.gridArea,\n      loop = _ref.loop,\n      margin = _ref.margin,\n      messages = _ref.messages,\n      mute = _ref.mute,\n      _onDurationChange = _ref.onDurationChange,\n      _onEnded = _ref.onEnded,\n      _onPause = _ref.onPause,\n      _onPlay = _ref.onPlay,\n      _onTimeUpdate = _ref.onTimeUpdate,\n      _onVolumeChange = _ref.onVolumeChange,\n      skipInterval = _ref.skipInterval,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var _useState = useState([]),\n      captions = _useState[0],\n      setCaptions = _useState[1];\n\n  var _useState2 = useState(),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(),\n      percentagePlayed = _useState4[0],\n      setPercentagePlayed = _useState4[1];\n\n  var _useState5 = useState(false),\n      playing = _useState5[0],\n      setPlaying = _useState5[1];\n\n  var _useState6 = useState(),\n      scrubTime = _useState6[0],\n      setScrubTime = _useState6[1];\n\n  var _useState7 = useState(),\n      volume = _useState7[0],\n      setVolume = _useState7[1];\n\n  var _useState8 = useState(false),\n      hasPlayed = _useState8[0],\n      setHasPlayed = _useState8[1];\n\n  var _useState9 = useState(),\n      interacting = _useState9[0],\n      setInteracting = _useState9[1];\n\n  var _useState10 = useState(),\n      height = _useState10[0],\n      setHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      width = _useState11[0],\n      setWidth = _useState11[1];\n\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n\n    return result;\n  }, [controlsProp]); // mute if needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]); // when the video is first rendered, set state from it where needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]); // turn off interacting after a while\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]);\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      } // remember the state of the text tracks for subsequent rendering\n\n\n      var textTracks = video.textTracks;\n\n      if (textTracks.length > 0) {\n        if (textTracks.length === 1) {\n          // only one track was provided\n          var track = textTracks[0];\n          var active = track.mode === 'showing';\n\n          if (!captions || !captions[0] || captions[0].active !== active) {\n            // get label if provided and if the track is active\n            // (currently showing) or not\n            setCaptions([{\n              label: track.label,\n              active: active\n            }]);\n          }\n        } else {\n          // multiple tracks provided\n          var nextCaptions = [];\n          var set = false;\n\n          for (var i = 0; i < textTracks.length; i += 1) {\n            var _track = textTracks[i];\n\n            var _active = _track.mode === 'showing';\n\n            nextCaptions.push({\n              label: _track.label,\n              active: _active\n            });\n\n            if (!captions || !captions[i] || captions[i].active !== _active) {\n              set = true;\n            }\n          }\n\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      }\n    }\n  }, [captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n\n    for (var i = 0; i < textTracks.length; i += 1) {\n      textTracks[i].mode = i === index ? 'showing' : 'hidden';\n    }\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n\n  if (controls != null && controls.position) {\n    var _controls$items;\n\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || 'video.captions',\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]); // set other captions to active=false\n\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false; // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null ? void 0 : _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) {\n          controlsMenuItems.push(buttonProps[item][i]);\n        }\n\n        return undefined;\n      }\n\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, {\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }))), /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n\n  var mouseEventListeners;\n\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n\n  var style;\n\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.defaultProps = {};\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };"],"mappings":"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"},"metadata":{},"sourceType":"module"}