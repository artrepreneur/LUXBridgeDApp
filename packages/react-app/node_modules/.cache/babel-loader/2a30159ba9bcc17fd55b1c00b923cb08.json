{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \" display:block;width:100%;\"], function (props) {\n  return props.selected && props.textComponent && selectedStyle;\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n      onClear = _ref.onClear,\n      name = _ref.name,\n      theme = _ref.theme;\n  var label = clear.label,\n      position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(Button, {\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n      _ref2$children = _ref2.children,\n      children = _ref2$children === void 0 ? null : _ref2$children,\n      disabled = _ref2.disabled,\n      disabledKey = _ref2.disabledKey,\n      dropHeight = _ref2.dropHeight,\n      _ref2$emptySearchMess = _ref2.emptySearchMessage,\n      emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n      id = _ref2.id,\n      labelKey = _ref2.labelKey,\n      multiple = _ref2.multiple,\n      name = _ref2.name,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onMore = _ref2.onMore,\n      onSearch = _ref2.onSearch,\n      optionIndexesInValue = _ref2.optionIndexesInValue,\n      options = _ref2.options,\n      allOptions = _ref2.allOptions,\n      searchPlaceholder = _ref2.searchPlaceholder,\n      search = _ref2.search,\n      setSearch = _ref2.setSearch,\n      selected = _ref2.selected,\n      usingKeyboard = _ref2.usingKeyboard,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? '' : _ref2$value,\n      valueKey = _ref2.valueKey,\n      _ref2$replace = _ref2.replace,\n      replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(-1),\n      activeIndex = _useState[0],\n      setActiveIndex = _useState[1];\n\n  var _useState2 = useState(),\n      keyboardNavigation = _useState2[0],\n      setKeyboardNavigation = _useState2[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n\n    if (optionsNode.children) {\n      var clearButton = clearRef.current;\n      var index = activeIndex;\n      if (clear && clear.position !== 'bottom' && clearButton) index += 1;\n      var optionNode = optionsNode.children[index];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex, clear]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (optionsNode && optionsNode.children && usingKeyboard) {\n        // if the user is navigating with the keyboard set the\n        // first child as the active index when the drop opens\n        setFocusWithoutScroll(optionsNode.children[0]);\n        setActiveIndex(0);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]); // clear keyboardNavigation after a while\n\n  useEffect(function () {\n    if (keyboardNavigation) {\n      // 100ms was empirically determined\n      var timer = setTimeout(function () {\n        return setKeyboardNavigation(false);\n      }, 100);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [keyboardNavigation]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position === 'bottom' && clearButton && nextActiveIndex >= options.length) {\n      setActiveIndex(options.length);\n      setFocusWithoutScroll(clearButton);\n    }\n  }, [activeIndex, isDisabled, options, clear]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position !== 'bottom' && clearButton && activeIndex === 0) {\n      setActiveIndex(-1);\n    }\n  }, [activeIndex, isDisabled, clear]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, isDisabled, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options]);\n\n  var shouldShowClearButton = function shouldShowClearButton(position) {\n    var hasValue = Boolean(multiple ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  };\n\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple\n  }, shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    var textComponent = false;\n\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index)));\n      textComponent = true;\n    } // if we have a child, turn on plain, and hoverIndicator\n\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      ref: optionRef,\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true\n  }, /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }))));\n});\nexport { SelectContainer };","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","selectedStyle","setFocusWithoutScroll","defaultProps","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","applyKey","OptionsBox","div","withConfig","displayName","componentId","SelectOption","props","selected","textComponent","ClearButton","_ref","ref","clear","onClear","name","theme","label","position","align","buttonLabel","createElement","fill","onClick","focusIndicator","select","container","text","SelectContainer","_ref2","_ref2$children","children","disabled","disabledKey","dropHeight","_ref2$emptySearchMess","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","options","allOptions","searchPlaceholder","search","setSearch","usingKeyboard","_ref2$value","value","valueKey","_ref2$replace","replace","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","clearRef","optionsNode","current","clearButton","index","optionNode","focus","timer","setTimeout","searchInput","clearTimeout","undefined","optionLabel","optionValue","isDisabled","option","result","Array","isArray","indexOf","optionVal","isSelected","some","valueItem","valueValue","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","map","reduce","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","e","charAt","toLowerCase","onActiveOption","onSelectOption","shouldShowClearButton","hasValue","Boolean","showAtPosition","customSearchInput","SelectTextInput","selectOptionsStyle","box","onEnter","onSpace","onUp","onDown","as","pad","flex","size","type","placeholder","nextSearch","role","tabIndex","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","active","plain","kind","hoverIndicator","onMouseOver"],"sources":["/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/LUXDApp/LUXBridgeDApp/packages/react-app/node_modules/grommet/es6/components/Select/SelectContainer.js"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \" display:block;width:100%;\"], function (props) {\n  return props.selected && props.textComponent && selectedStyle;\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n      onClear = _ref.onClear,\n      name = _ref.name,\n      theme = _ref.theme;\n  var label = clear.label,\n      position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(Button, {\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n      _ref2$children = _ref2.children,\n      children = _ref2$children === void 0 ? null : _ref2$children,\n      disabled = _ref2.disabled,\n      disabledKey = _ref2.disabledKey,\n      dropHeight = _ref2.dropHeight,\n      _ref2$emptySearchMess = _ref2.emptySearchMessage,\n      emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n      id = _ref2.id,\n      labelKey = _ref2.labelKey,\n      multiple = _ref2.multiple,\n      name = _ref2.name,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onMore = _ref2.onMore,\n      onSearch = _ref2.onSearch,\n      optionIndexesInValue = _ref2.optionIndexesInValue,\n      options = _ref2.options,\n      allOptions = _ref2.allOptions,\n      searchPlaceholder = _ref2.searchPlaceholder,\n      search = _ref2.search,\n      setSearch = _ref2.setSearch,\n      selected = _ref2.selected,\n      usingKeyboard = _ref2.usingKeyboard,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? '' : _ref2$value,\n      valueKey = _ref2.valueKey,\n      _ref2$replace = _ref2.replace,\n      replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(-1),\n      activeIndex = _useState[0],\n      setActiveIndex = _useState[1];\n\n  var _useState2 = useState(),\n      keyboardNavigation = _useState2[0],\n      setKeyboardNavigation = _useState2[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n\n    if (optionsNode.children) {\n      var clearButton = clearRef.current;\n      var index = activeIndex;\n      if (clear && clear.position !== 'bottom' && clearButton) index += 1;\n      var optionNode = optionsNode.children[index];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex, clear]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (optionsNode && optionsNode.children && usingKeyboard) {\n        // if the user is navigating with the keyboard set the\n        // first child as the active index when the drop opens\n        setFocusWithoutScroll(optionsNode.children[0]);\n        setActiveIndex(0);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]); // clear keyboardNavigation after a while\n\n  useEffect(function () {\n    if (keyboardNavigation) {\n      // 100ms was empirically determined\n      var timer = setTimeout(function () {\n        return setKeyboardNavigation(false);\n      }, 100);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [keyboardNavigation]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position === 'bottom' && clearButton && nextActiveIndex >= options.length) {\n      setActiveIndex(options.length);\n      setFocusWithoutScroll(clearButton);\n    }\n  }, [activeIndex, isDisabled, options, clear]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position !== 'bottom' && clearButton && activeIndex === 0) {\n      setActiveIndex(-1);\n    }\n  }, [activeIndex, isDisabled, clear]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, isDisabled, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options]);\n\n  var shouldShowClearButton = function shouldShowClearButton(position) {\n    var hasValue = Boolean(multiple ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  };\n\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple\n  }, shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    var textComponent = false;\n\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index)));\n      textComponent = true;\n    } // if we have a child, turn on plain, and hoverIndicator\n\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      ref: optionRef,\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true\n  }, /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }))));\n});\nexport { SelectContainer };"],"mappings":"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"},"metadata":{},"sourceType":"module"}