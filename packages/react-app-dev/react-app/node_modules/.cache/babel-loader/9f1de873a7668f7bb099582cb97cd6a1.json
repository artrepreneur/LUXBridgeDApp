{"ast":null,"code":"var _jsxFileName = \"/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/src/App.js\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ethers } from \"ethers\";\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport MetaMaskOnboarding from '@metamask/onboarding';\nimport { Button, Footer, Text, Box, Grommet, ResponsiveContext } from \"grommet\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Teleport from \"./components/Teleport\";\nimport Collapsible from \"./components/Collapsible\";\nimport useWeb3Modal from \"./hooks/useWeb3Modal\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\nimport logoFooter from \"./img/odapp-logo-footer.svg\";\nimport { ButtonFooter, ImageFooter, customBreakpoints } from \"./components/\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { Connect } from 'grommet-icons';\nvar clr = '#FBA300';\nvar web3Provider, provider;\nconst onboarding = new MetaMaskOnboarding();\n\nasync function checkMetamask() {\n  provider = await detectEthereumProvider();\n\n  if (provider) {\n    console.log('Metamask successfully detected!');\n    const provider = new WalletConnectProvider({\n      infuraId: \"27e484dcd9e3efcfd25a83a78777cdf1\"\n    });\n    return web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n  } else {\n    console.log('Please install metamask');\n    alert('Please install metamask');\n    return false;\n  }\n}\n\nfunction WalletButton(_ref) {\n  let {\n    provider,\n    loadWeb3Modal,\n    logoutOfWeb3Modal,\n    clr\n  } = _ref;\n  var initialLabel = !provider ? \"Connect Wallet\" : \"Disconnect Wallet\";\n  const [label, setLabel] = useState(initialLabel);\n  return /*#__PURE__*/React.createElement(Button, {\n    id: \"cnct\",\n    primary: true,\n    size: \"large\",\n    align: \"center\",\n    color: \"#FBA300\",\n    className: \"mainConnect\",\n    label: !provider ? \"Connect Wallet\" : \"Disconnect Wallet\",\n    onClick: async () => {\n      if (typeof window.ethereum === 'undefined') {\n        console.log('stuff', typeof window.ethereum);\n        onboarding.startOnboarding();\n        alert('Please install metamask to use this site');\n        return;\n      }\n\n      if (!provider) {\n        setLabel(\"Connect Wallet\");\n        loadWeb3Modal();\n      } else {\n        setLabel(\"Disconnect Wallet\");\n        logoutOfWeb3Modal();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  });\n}\n\nasync function connectMetamask() {\n  try {\n    // Will open the MetaMask UI\n    const accounts = await window.ethereum.request({\n      method: 'eth_requestAccounts'\n    });\n\n    if (accounts.length > 0) {\n      const account = accounts[0];\n      console.log('Account Connected:', account);\n      provider = await checkMetamask();\n      console.log('Provider', provider);\n      return provider;\n    } else {\n      console.log('Connect metamask');\n    }\n  } catch (error) {\n    console.error(error);\n    alert(error); //return provider;\n  }\n}\n\nfunction App() {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_TRANSFERS);\n  const [provider, loadWeb3Modal, logoutOfWeb3Modal] = useWeb3Modal();\n  const items = [{\n    label: 'Teleport',\n    href: '/'\n  }];\n  React.useEffect(() => {\n    if (!loading && !error && data && data.transfers) {\n      console.log({\n        transfers: data.transfers\n      });\n    }\n  }, [loading, error, data]); //connectMetamask();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Collapsible, {\n    btn: WalletButton({\n      provider,\n      loadWeb3Modal,\n      logoutOfWeb3Modal,\n      clr\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Teleport, {\n    btn: WalletButton({\n      provider,\n      loadWeb3Modal,\n      logoutOfWeb3Modal,\n      clr\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"names":["React","useState","useQuery","ethers","detectEthereumProvider","MetaMaskOnboarding","Button","Footer","Text","Box","Grommet","ResponsiveContext","BrowserRouter","Router","Route","Switch","Teleport","Collapsible","useWeb3Modal","GET_TRANSFERS","ButtonFooter","ImageFooter","customBreakpoints","WalletConnectProvider","Connect","clr","web3Provider","provider","onboarding","checkMetamask","console","log","infuraId","providers","Web3Provider","window","ethereum","alert","WalletButton","loadWeb3Modal","logoutOfWeb3Modal","initialLabel","label","setLabel","startOnboarding","connectMetamask","accounts","request","method","length","account","error","App","loading","data","items","href","useEffect","transfers"],"sources":["/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ethers } from \"ethers\";\nimport detectEthereumProvider from '@metamask/detect-provider'\nimport MetaMaskOnboarding from '@metamask/onboarding'\nimport { Button, Footer, Text, Box, Grommet, ResponsiveContext } from \"grommet\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Teleport from \"./components/Teleport\";\nimport Collapsible from \"./components/Collapsible\";\nimport useWeb3Modal from \"./hooks/useWeb3Modal\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\nimport logoFooter from \"./img/odapp-logo-footer.svg\";\nimport { ButtonFooter, ImageFooter, customBreakpoints } from \"./components/\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nimport {\n  Connect\n} from 'grommet-icons';\n\nvar clr = '#FBA300';\n\n\nvar web3Provider, provider;\nconst onboarding = new MetaMaskOnboarding();\n\nasync function checkMetamask(){\n\n  provider = await detectEthereumProvider();\n  if (provider) {\n    console.log('Metamask successfully detected!');\n    const provider = new WalletConnectProvider({\n        infuraId: \"27e484dcd9e3efcfd25a83a78777cdf1\",\n      });\n    return web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n\n  }\n  else{\n    console.log('Please install metamask');\n    alert('Please install metamask');\n    return false;\n  }\n\n}\n\nfunction WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) {\n\n\n  var initialLabel = !provider ? \"Connect Wallet\" : \"Disconnect Wallet\";\n  const [label, setLabel] = useState(initialLabel);\n  return (\n\n    <Button id=\"cnct\" primary size=\"large\" align=\"center\" color=\"#FBA300\" className=\"mainConnect\" label={!provider ? \"Connect Wallet\" : \"Disconnect Wallet\"} onClick={async () => {\n\n      if (typeof window.ethereum === 'undefined') {\n        console.log('stuff', typeof window.ethereum);\n        onboarding.startOnboarding();\n        alert('Please install metamask to use this site');\n        return;\n      }\n\n      if (!provider) {\n        setLabel(\"Connect Wallet\");\n        loadWeb3Modal();\n      } else {\n        setLabel(\"Disconnect Wallet\");\n        logoutOfWeb3Modal();\n      }\n\n    }}/>\n\n  );\n}\n\n\nasync function connectMetamask(){\n  try {\n    // Will open the MetaMask UI\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    if (accounts.length > 0 ){\n      const account = accounts[0];\n      console.log('Account Connected:', account);\n      provider = await checkMetamask();\n      console.log('Provider', provider);\n      return provider;\n\n    }\n    else {\n      console.log('Connect metamask');\n    }\n\n\n  } catch (error) {\n    console.error(error);\n    alert(error);\n    //return provider;\n  }\n}\n\n\nfunction App() {\n\n  const { loading, error, data } = useQuery(GET_TRANSFERS);\n  const [provider, loadWeb3Modal, logoutOfWeb3Modal] = useWeb3Modal();\n  const items = [\n    { label: 'Teleport', href: '/' }\n  ];\n\n  React.useEffect(() => {\n    if (!loading && !error && data && data.transfers) {\n      console.log({ transfers: data.transfers });\n    }\n  }, [loading, error, data]);\n\n  //connectMetamask();\n\n  return (\n    <div>\n    <Collapsible btn={ WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) }/>\n        <Router>\n          <Switch>\n\n\n            <Route exact path=\"/\">\n              <Teleport btn={ WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) }/>\n            </Route>\n\n          </Switch>\n        </Router>\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}