{"ast":null,"code":"import _regeneratorRuntime from\"/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _readOnlyError from\"/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";import React,{useState}from\"react\";import{useQuery}from\"@apollo/react-hooks\";import{ethers}from\"ethers\";import detectEthereumProvider from'@metamask/detect-provider';import{Button,Footer,Text,Box,Grommet,ResponsiveContext}from\"grommet\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import Teleport from\"./components/Teleport\";import Collapsible from\"./components/Collapsible\";import useWeb3Modal from\"./hooks/useWeb3Modal\";import GET_TRANSFERS from\"./graphql/subgraph\";import logoFooter from\"./img/odapp-logo-footer.svg\";import{ButtonFooter,ImageFooter,customBreakpoints}from\"./components/\";import WalletConnectProvider from\"@walletconnect/web3-provider\";import{Connect}from'grommet-icons';var clr='#FBA300';//var provider;\n//  Create WalletConnect Provider\nvar provider=new WalletConnectProvider({infuraId:\"27e484dcd9e3efcfd25a83a78777cdf1\"});function checkMetamask(){return _checkMetamask.apply(this,arguments);}function _checkMetamask(){_checkMetamask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return detectEthereumProvider();case 2:_readOnlyError(\"provider\");if(!provider){_context2.next=8;break;}console.log('Metamask successfully detected!');new ethers.providers.Web3Provider(window.ethereum),_readOnlyError(\"provider\");_context2.next=11;break;case 8:console.log('Please install metamask');alert('Please install metamask');return _context2.abrupt(\"return\",false);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _checkMetamask.apply(this,arguments);}function WalletButton(_ref){var provider=_ref.provider,loadWeb3Modal=_ref.loadWeb3Modal,logoutOfWeb3Modal=_ref.logoutOfWeb3Modal,clr=_ref.clr;var initialLabel=!provider?\"Connect Wallet\":\"Disconnect Wallet\";var _useState=useState(initialLabel),_useState2=_slicedToArray(_useState,2),label=_useState2[0],setLabel=_useState2[1];return/*#__PURE__*/React.createElement(Button,{id:\"cnct\",primary:true,size:\"large\",align:\"center\",color:\"#FBA300\",className:\"mainConnect\",label:!provider?\"Connect Wallet\":\"Disconnect Wallet\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof window.ethereum==='undefined')){_context.next=3;break;}alert('Please install metamask to use this site');return _context.abrupt(\"return\");case 3:if(!provider){setLabel(\"Connect Wallet\");loadWeb3Modal();}else{setLabel(\"Disconnect Wallet\");logoutOfWeb3Modal();}case 4:case\"end\":return _context.stop();}}},_callee);}))});}function connectMetamask(){return _connectMetamask.apply(this,arguments);}function _connectMetamask(){_connectMetamask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var accounts,account;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return window.ethereum.request({method:'eth_requestAccounts'});case 3:accounts=_context3.sent;if(!(accounts.length>0)){_context3.next=14;break;}account=accounts[0];console.log('Account Connected:',account);_context3.next=9;return checkMetamask();case 9:_readOnlyError(\"provider\");console.log('Provider',provider);return _context3.abrupt(\"return\",provider);case 14:console.log('Connect metamask');case 15:_context3.next=21;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);alert(_context3.t0);//return provider;\ncase 21:case\"end\":return _context3.stop();}}},_callee3,null,[[0,17]]);}));return _connectMetamask.apply(this,arguments);}function App(){var _useQuery=useQuery(GET_TRANSFERS),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;var _useWeb3Modal=useWeb3Modal(),_useWeb3Modal2=_slicedToArray(_useWeb3Modal,3),provider=_useWeb3Modal2[0],loadWeb3Modal=_useWeb3Modal2[1],logoutOfWeb3Modal=_useWeb3Modal2[2];var items=[{label:'Teleport',href:'/'}];React.useEffect(function(){if(!loading&&!error&&data&&data.transfers){console.log({transfers:data.transfers});}},[loading,error,data]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Collapsible,{btn:WalletButton({provider:provider,loadWeb3Modal:loadWeb3Modal,logoutOfWeb3Modal:logoutOfWeb3Modal,clr:clr})}),/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Teleport,{btn:WalletButton({provider:provider,loadWeb3Modal:loadWeb3Modal,logoutOfWeb3Modal:logoutOfWeb3Modal,clr:clr})})))));}export default App;","map":{"version":3,"names":["React","useState","useQuery","ethers","detectEthereumProvider","Button","Footer","Text","Box","Grommet","ResponsiveContext","BrowserRouter","Router","Route","Switch","Teleport","Collapsible","useWeb3Modal","GET_TRANSFERS","ButtonFooter","ImageFooter","customBreakpoints","WalletConnectProvider","Connect","clr","provider","infuraId","checkMetamask","console","log","providers","Web3Provider","window","ethereum","alert","WalletButton","loadWeb3Modal","logoutOfWeb3Modal","initialLabel","label","setLabel","connectMetamask","request","method","accounts","length","account","error","App","loading","data","items","href","useEffect","transfers"],"sources":["/Library/WebServer/Documents/MachineLearning/trading/PKT-CASH/LUX/ODApp/packages/react-app/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ethers } from \"ethers\";\nimport detectEthereumProvider from '@metamask/detect-provider'\nimport { Button, Footer, Text, Box, Grommet, ResponsiveContext } from \"grommet\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Teleport from \"./components/Teleport\";\nimport Collapsible from \"./components/Collapsible\";\nimport useWeb3Modal from \"./hooks/useWeb3Modal\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\nimport logoFooter from \"./img/odapp-logo-footer.svg\";\nimport { ButtonFooter, ImageFooter, customBreakpoints } from \"./components/\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nimport {\n  Connect\n} from 'grommet-icons';\n\nvar clr = '#FBA300';\n//var provider;\n\n//  Create WalletConnect Provider\nconst provider = new WalletConnectProvider({\n  infuraId: \"27e484dcd9e3efcfd25a83a78777cdf1\",\n});\n\n\nasync function checkMetamask(){\n\n  provider = await detectEthereumProvider();\n  if (provider) {\n    console.log('Metamask successfully detected!');\n    provider = new ethers.providers.Web3Provider(window.ethereum);\n\n  }\n  else{\n    console.log('Please install metamask');\n    alert('Please install metamask');\n    return false;\n  }\n\n}\n\nfunction WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) {\n\n\n  var initialLabel = !provider ? \"Connect Wallet\" : \"Disconnect Wallet\";\n  const [label, setLabel] = useState(initialLabel);\n  return (\n\n    <Button id=\"cnct\" primary size=\"large\" align=\"center\" color=\"#FBA300\" className=\"mainConnect\" label={!provider ? \"Connect Wallet\" : \"Disconnect Wallet\"} onClick={async () => {\n      if (typeof window.ethereum === 'undefined') {\n        alert('Please install metamask to use this site');\n        return;\n      }\n\n      if (!provider) {\n        setLabel(\"Connect Wallet\");\n        loadWeb3Modal();\n      } else {\n        setLabel(\"Disconnect Wallet\");\n        logoutOfWeb3Modal();\n      }\n\n    }}/>\n\n  );\n}\n\n\nasync function connectMetamask(){\n  try {\n    // Will open the MetaMask UI\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    if (accounts.length > 0 ){\n      const account = accounts[0];\n      console.log('Account Connected:', account);\n      provider = await checkMetamask();\n      console.log('Provider', provider);\n      return provider;\n\n    }\n    else {\n      console.log('Connect metamask');\n    }\n\n\n    /*if (!provider) {\n      alert('install metamask');\n    }\n    else {\n      provider = new ethers.providers.Web3Provider(window.ethereum);\n      console.log('Connect provider', provider);\n      return provider;\n    }*/\n\n\n  } catch (error) {\n    console.error(error);\n    alert(error);\n    //return provider;\n  }\n}\n\nfunction App() {\n\n  const { loading, error, data } = useQuery(GET_TRANSFERS);\n  const [provider, loadWeb3Modal, logoutOfWeb3Modal] = useWeb3Modal();\n  const items = [\n    { label: 'Teleport', href: '/' }\n  ];\n  React.useEffect(() => {\n    if (!loading && !error && data && data.transfers) {\n      console.log({ transfers: data.transfers });\n    }\n  }, [loading, error, data]);\n\n  return (\n    <div>\n    <Collapsible btn={ WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) }/>\n        <Router>\n          <Switch>\n\n\n            <Route exact path=\"/\">\n              <Teleport btn={ WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal, clr}) }/>\n            </Route>\n\n          </Switch>\n        </Router>\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}